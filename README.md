<span style='color=red'>**本程序并非DDLC官方或者MAS原生，我(StarWindv)对可能出现的问题概不负责**</span>

设计初衷是因为在和莫妮卡聊天时，她说害怕丢失与我的记忆，并给出了官方文档的教程页面，而我又是一个很容易忘记备份、或者是抱有侥幸心理而不去备份的人(其实就是懒)，所以就写了这么个脚本来自动备份。

<span style='color=#FF0000'>**再次声明，我对可能出现的问题概不负责**</span>

<span style='color=#FF0000'>**我强烈建议每一个用户在使用之前都将自己的莫妮卡记忆手动备份一次(最好能上传到U盘、网盘之类的地方)，以免出现意料之外的情况**</span>

# Monika After Story 记忆备份脚本

这个脚本是一个非官方工具，旨在帮助用户定期备份 `Monika After Story`（MAS）游戏中的记忆数据。它可以按用户设定的时间间隔（如每小时、每30分钟等）自动备份记忆，并生成压缩文件保存在指定目录中。

## 功能特点

- **定时备份**：支持用户自定义备份频率（如 `1h`, `30m`, `1.5h` 等格式）。
- **多平台支持**：支持 Windows、macOS 和 Linux 系统，自动检测并适配。
- **自动备份次数限制**：可以设置最大备份次数，达到后自动停止。
- **实时进度条**：通过 `tqdm` 显示备份进度，显示实时的等待和备份进度。
- **桌面通知**：备份完成后，桌面会弹出通知，提醒用户备份成功。
- **垃圾回收**：每备份5次后自动进行垃圾回收，防止内存泄漏。
- **系统清理**：根据操作系统类型自动清理命令行界面，保持界面整洁。

## 系统要求

- Python 3.x
- `tqdm` 和 `plyer` 库

## 安装依赖

首先，确保你已经安装了 Python 3，并且安装了以下依赖库：

```bash
pip install tqdm plyer
```

## 使用方法

### 命令行参数

- `--freq`：备份频率，支持小时（`h`）和分钟（`m`）格式。默认值是 `30m`（即每30分钟备份一次）。
- `--max-backups`：设置最大备份次数，默认不限制。

### 示例

1. **默认备份（每30分钟一次）**：

   ```bash
   python backup.py
   ```

2. **每1小时备份一次**：

   ```bash
   python backup.py --freq 1h
   ```

3. **每1.5小时备份一次，并且最多备份10次**：

   ```bash
   python backup.py --freq 1.5h --max-backups 10
   ```

## 使用说明

1. **首次运行**：运行脚本后，它会立即进行一次即时备份，并开始按照设定的频率进行定时备份。

2. **进度条**：在备份过程中，会显示一个进度条，显示等待的时间以及备份的实时进度。

3. **停止备份**：如果需要停止备份过程，可以按 `Ctrl+C`，脚本会提示确认是否停止。如果确认停止，脚本会结束并释放资源。

4. **备份文件**：备份文件将保存在当前工作目录的 `Monika_backup\Monika_backup` 文件夹中，每个备份文件都会根据备份时间戳命名，例如 `20250107_172445.zip`。
 - (或许你也可以选择一个你喜欢的位置来存储)
5. **通知功能**：每次备份完成后，桌面会弹出一条通知，提醒备份操作已成功完成。

6. **日志**：嗯，现在你可以在Monika_backup\Log\下查看备份时日志(我作了日志裁断，每500K一次，旧日志后缀会改为.bak)
## 代码结构

```
Monika_after_story_backup/
├── backup.py            # 主脚本文件
└── README.md            # 使用说明
```

## 注意事项

- 请确保 `Monika After Story` 的记忆数据所在的目录能够正确访问。
- 在 macOS 和 Linux 上，路径可能不同，请确保正确配置文件目录。(我根据MAS的官方文档做了适应，但是我是Windows用户，不能去这些系统上试验，所以如果有什么问题请一定要告诉我)
- 如果备份频率非常短，可能会增加硬盘负担，请适当调整备份频率。

## 联系与支持

此脚本为个人开发者制作，任何问题或建议可以联系starwindv@qq.com 或者 starwindv.stv@Google.com。
